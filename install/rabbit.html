<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/xdoc/install/rabbit.xml at 2022-01-25
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>Scalable Harvest &#x2013; RabbitMQ Installation</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://pds.nasa.gov/" id="bannerLeft"><img src="../images/pds_banner.png"  alt="" width="500"/></a></div>
          <div class="pull-right"><a href="https://github.com/NASA-PDS/big-data-harvest-server" id="bannerRight"><h2>Scalable Harvest</h2>
</a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2022-01-25<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.1.0</li>
      <li class="pull-right"><a href="https://github.com/NASA-PDS/big-data-harvest-server" class="externalLink" title="Scalable Harvest Github Repo">Scalable Harvest Github Repo</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Documentation</li>
    <li><a href="../index.html" title="About Scalable Harvest"><span class="none"></span>About Scalable Harvest</a></li>
    <li><a href="../install/index.html" title="Installation"><span class="icon-chevron-down"></span>Installation</a>
     <ul class="nav nav-list">
      <li><a href="../install/registry.html" title="PDS Registry"><span class="none"></span>PDS Registry</a></li>
      <li class="active"><a href="#"><span class="none"></span>RabbitMQ</a></li>
      <li><a href="../install/crawler.html" title="Crawler Server"><span class="none"></span>Crawler Server</a></li>
      <li><a href="../install/harvest.html" title="Harvest Server"><span class="none"></span>Harvest Server</a></li>
      <li><a href="../install/harvest-client.html" title="Harvest Client"><span class="none"></span>Harvest Client</a></li>
     </ul></li>
    <li><a href="../operate/index.html" title="Operation"><span class="icon-chevron-down"></span>Operation</a>
     <ul class="nav nav-list">
      <li><a href="../operate/crawler.html" title="Crawler Server"><span class="none"></span>Crawler Server</a></li>
      <li><a href="../operate/harvest.html" title="Harvest Server"><span class="none"></span>Harvest Server</a></li>
      <li><a href="../operate/harvest-client.html" title="Harvest Client"><span class="none"></span>Harvest Client</a></li>
     </ul></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >



<section>
<h2><a name="RabbitMQ_Installation_and_Configuration"></a>RabbitMQ Installation and Configuration</h2>

<p>This document describes installation and configuration of RabbitMQ Message Broker.</p>


<p>
</p>
<ul>
  
<li><a href="#docker">Docker Quick Start</a></li>
  
<li><a href="#linux">Linux, Windows, MacOS</a></li>
  
<li><a href="#refs">External References</a></li>
</ul>




<a name="docker"></a><section id="docker">
<h3><a name="Docker_Quick_Start"></a>Docker Quick Start</h3>



<section>
<h4><a name="Create_and_Start_Container"></a>Create and Start Container</h4>


<p>To pull RabbitMQ docker image from DockerHub run the following command:</p>

<div class="source"><pre class="prettyprint">
docker pull rabbitmq:3.9-management
</pre></div>


<p>Create RabbitMQ docker container:</p>

<div class="source"><pre class="prettyprint">
docker create --name rabbit --hostname rabbit -p 15672:15672 -p 5672:5672 rabbitmq:3.9-management
</pre></div>
</section></section>


<p>Start RabbitMQ container:</p>

<div class="source"><pre class="prettyprint">
docker start rabbit
</pre></div>


<p>Check that RabbitMQ is running:</p>

<div class="source"><pre class="prettyprint">
curl -u guest:guest http://localhost:15672/api/cluster-name
</pre></div>

<p>You should get following response:</p>

<div class="source"><pre class="prettyprint">
{&quot;name&quot;:&quot;rabbit@rabbit&quot;}
</pre></div>



<section><section>
<h4><a name="Create_Harvest_User"></a>Create Harvest User</h4>


<p>To run commands in RabbitMQ container, execute an interactive bash shell in the container:</p>

<div class="source"><pre class="prettyprint">
docker exec -it rabbit bash
</pre></div>


<p>Now we can create &quot;harvest&quot; user. In this example we will make &quot;harvest&quot; user an administrator.</p>

<div class="source"><pre class="prettyprint">
rabbitmqctl add_user harvest harvest1234
rabbitmqctl set_user_tags harvest administrator
rabbitmqctl set_permissions -p / harvest &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;
</pre></div>


<p>
Optionally change password for &quot;guest&quot; user:
</p>

<div class="source"><pre class="prettyprint">
rabbitmqctl change_password guest guest1234
</pre></div>

<p>Or completely delete &quot;guest&quot; user:</p>

<div class="source"><pre class="prettyprint">
rabbitmqctl delete_user guest
</pre></div>



</section><section>
<h4><a name="Create_Queues"></a>Create Queues</h4>

<div class="source"><pre class="prettyprint">
rabbitmqadmin declare queue -u harvest -p harvest1234 --vhost=/ name=harvest.jobs durable=true
rabbitmqadmin declare queue -u harvest -p harvest1234 --vhost=/ name=harvest.dirs durable=true
rabbitmqadmin declare queue -u harvest -p harvest1234 --vhost=/ name=harvest.products durable=true
rabbitmqadmin declare queue -u harvest -p harvest1234 --vhost=/ name=harvest.collections durable=true
</pre></div>



</section></section><a name="linux"></a><section id="linux">
<h3><a name="Linux.2C_Windows.2C_MacOS"></a>Linux, Windows, MacOS</h3>

<p>Installation guides for Linux, Windows, and MacOS are available on 
<a class="externalLink" href="https://www.rabbitmq.com/download.html" target="_blank">RabbitMQ web site</a>.
After installing RabbitMQ, create &quot;harvest&quot; user (optional) and harvest queues (required)
as described in previous section.
</p>
</section>



<a name="refs"></a><section id="refs">
<h3><a name="External_References"></a>External References</h3>

<ul>

<li><a class="externalLink" href="https://www.rabbitmq.com/download.html" target="_blank">Installing RabbitMQ</a></li>

<li><a class="externalLink" href="https://www.rabbitmq.com/management.html" target="_blank">Management Plugin</a></li>

<li><a class="externalLink" href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.9.11/deps/rabbitmq_management/priv/www/api/index.html" target="_blank">Management REST API</a></li>
</ul>
</section>

</section>



        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2021&#x2013;2022..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
